(this["webpackJsonpuniversity-bus-system-admin-react-app"]=this["webpackJsonpuniversity-bus-system-admin-react-app"]||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),l=a.n(o),s=(a(79),a(7)),i=a(8),c=a(9),u=a(10),p=(a(80),a(81),a(20)),d=a(31),m=a(113),f=a(67),g=a(3),h=a(119),b=a(111),E=a(112),v=a(6),y=a.n(v),S=a(14),C=a(12),N=a.n(C),k="GET_ERRORS",O=function(e){e?N.a.defaults.headers.common.Authorization="Bearer "+e:delete N.a.defaults.headers.common.Authorization},x=a(39),j=a.n(x),I=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("jwtToken"),O(!1),t({type:"SET_CURRENT_USER",payload:{}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=a(13),w=a(15),T=a(16),H=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).processLogout=function(e){window.confirm("Do you want to logout?")&&(n.props.logout(),window.location.href="/")},n.state={pathnameComponents:window.location.pathname.split("/")},n.processLogout=n.processLogout.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,{defaultActiveKey:""===this.state.pathnameComponents[1]?"/schedule":"/"+this.state.pathnameComponents[1],variant:"pills",className:"flex-column",style:{padding:"10px",border:"1px solid gray",borderRadius:"5px",fontSize:"14px",fontWeight:"500"}},r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement("img",{src:"/DIUBNR.png",height:"75px",alt:"sidebar logo"})),r.a.createElement("br",null),r.a.createElement(h.a.Link,{href:"/schedule"},r.a.createElement(w.a,{icon:T.c})," Schedule"),r.a.createElement(h.a.Link,{href:"/bus"},r.a.createElement(w.a,{icon:T.b})," Bus"),r.a.createElement(h.a.Link,{href:"/stoppage"},r.a.createElement(w.a,{icon:T.e})," Stoppage"),r.a.createElement(h.a.Link,{href:"/route"},r.a.createElement(w.a,{icon:T.i})," Route"),r.a.createElement(h.a.Link,{href:"/driver"},r.a.createElement(w.a,{icon:T.m})," Driver"),r.a.createElement(h.a.Link,{href:"/stuff"},r.a.createElement(w.a,{icon:T.l})," Stuff"),r.a.createElement(h.a.Link,{href:"/notice"},r.a.createElement(w.a,{icon:T.a})," Notice"),r.a.createElement(h.a.Link,{href:"/feedback"},r.a.createElement(w.a,{icon:T.d})," Feedback"),r.a.createElement("br",null),r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:this.processLogout},r.a.createElement("span",null,r.a.createElement(w.a,{icon:T.g})),"  Logout"))}}]),a}(n.Component),D=Object(R.b)(null,{logout:I})(H),A=a(115),B=a(114),z=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToPageNo=function(e,t){window.location.replace("/schedule/page/".concat(t))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.data.pageNo-1>0&&t.push(r.a.createElement(E.a,{key:this.props.data.pageNo-1,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo-1)}},this.props.data.pageNo-1)),t.push(r.a.createElement(E.a,{key:this.props.data.pageNo,size:"sm",variant:"primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo)}},this.props.data.pageNo));for(var a=function(a){t.push(r.a.createElement(E.a,{key:a,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,a)}},a))},n=this.props.data.pageNo+1;n<=Math.min(this.props.data.pageCount-1,this.props.data.pageNo+5);n++)a(n);return this.props.data.pageCount-this.props.data.pageNo+1>5&&t.push(r.a.createElement(E.a,{key:0,size:"sm",variant:"outline-primary",disabled:!0},r.a.createElement("strong",null,"......"))),this.props.data.pageCount-this.props.data.pageNo+1>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageCount,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageCount)}},this.props.data.pageCount)),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:3,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:"/schedule/add"},r.a.createElement(E.a,{size:"sm",variant:"outline-primary"},"Add Schedule"))),r.a.createElement(f.a,{md:9,style:{padding:"5px",paddingRight:"15px"}},r.a.createElement(B.a,{size:"sm",style:{float:"right"}},t)))}}]),a}(n.Component),L=function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.post("/api/route/add",e);case 3:t.push("/route"),n({type:k,payload:{}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:k,payload:a.t0.respose.data});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},G=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/route/GLOBAL/all");case 2:(a=e.sent).data.sort((function(e,t){return e.routeId-t.routeId})),t({type:"GET_BUSROUTES",payload:a.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.post("/api/schedule/add",e);case 3:t.push("/schedule"),n({type:k,payload:{}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:k,payload:a.t0.response.data});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},q=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(f.a,{style:{padding:"0px",fontSize:"11px"}},r.a.createElement("div",null,new Date(this.props.date).toDateString()),r.a.createElement("div",null,new Date(this.props.date).toLocaleTimeString()))}}]),a}(n.Component),_=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).showRoute=function(e){var t="",a=e.length;t="(";for(var n=0;n<a;n++)t+=e[n].stoppageName,t+=n+1<a?",":")";return t},e.showRoute=e.showRoute.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(f.a,{style:{padding:"0px"}},r.a.createElement("div",null,"RouteNo: "+(this.props.route?this.props.route.routeId:"")),r.a.createElement("div",{style:{fontSize:"10px",paddingLeft:"0px",paddingRight:"0px"}},this.props.route&&this.showRoute(this.props.route.routeDetail)))}}]),a}(n.Component),U={backgroundColor:"#ebc6c6"},P=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllSchedules(),e.props.getBusRoutes()},e.deleteScheduleHandler=function(t){e.props.deleteSchedule(t,e.props.history)};var n=window.location.pathname.split("/"),r=1;return 4===n.length&&(r=parseInt(n[3])),e.state={pageNo:r},e.deleteScheduleHandler=e.deleteScheduleHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=30*this.state.pageNo,a=30*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props,o=n.schedule,l=n.busRoute;return r.a.createElement("div",null,r.a.createElement(z,{data:{pageNo:this.state.pageNo,pageCount:parseInt(o.schedules.length/30)+(o.schedules.length%30>0?1:0)}}),r.a.createElement(m.a,{style:{height:"1300px",overflow:"auto"}},r.a.createElement(f.a,{md:12},r.a.createElement(A.a,{size:"sm",bordered:!0,striped:!0,hover:!0},r.a.createElement("thead",{style:{textAlign:"center"}},r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Date & Time"),r.a.createElement("th",null,"Route"),r.a.createElement("th",null,"Bus"),r.a.createElement("th",null,"Driver"),r.a.createElement("th",null,"Stuff"),r.a.createElement("th",{colSpan:2},"Action"))),r.a.createElement("tbody",null,o.schedules.map((function(n,o){return o+1>=a&&o+1<=t?r.a.createElement("tr",{key:o,style:!0===n.isComplete?U:null},r.a.createElement("td",{style:{textAlign:"center"}},o+1),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement(q,{date:n.date})),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement(_,{route:l.routes.find((function(e){return e.routeId===n.route.routeId}))})),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement("div",null,"BusNo: "+n.bus.busId),r.a.createElement("div",{style:{fontSize:"11px"}},n.bus.number)),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement("div",null,"DriverId: "+n.driver.driverId),r.a.createElement("div",{style:{fontSize:"11px"}},"Name: "+n.driver.user.firstName+" "+n.driver.user.lastName)),r.a.createElement("td",{style:{textAlign:"center"}},n.stuff?r.a.createElement("div",null,r.a.createElement("div",null,"StuffId: "+n.stuff.stuffId),r.a.createElement("div",{style:{fontSize:"11px"}},"Name: "+n.stuff.user.firstName+" "+n.stuff.user.lastName)):null),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement(p.b,{to:"/schedule/edit/".concat(n.scheduleId)},r.a.createElement(E.a,{size:"sm",variant:"outline-success"},r.a.createElement(w.a,{icon:T.f})))),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteScheduleHandler(n.scheduleId)}},r.a.createElement(w.a,{icon:T.j})))):null})))))))}}]),a}(n.Component),M=Object(R.b)((function(e){return{schedule:e.schedule,busRoute:e.busRoute}}),{getAllSchedules:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/schedule/GLOBAL/all");case 2:a=e.sent,(n=a.data).sort((function(e,t){return new Date(t.date)-new Date(e.date)})),t({type:"GET_SCHEDULES",payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteSchedule:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/schedule/".concat(e));case 4:n({type:"DELETE_SCHEDULE",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/schedule");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()},getBusRoutes:G})(P),V=a(19),W=a(118),Y=function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.a.post("/api/bus/".concat(t),e);case 3:a.push("/bus"),r({type:k,payload:{}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:k,payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},K=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/bus/all");case 2:a=e.sent,n=(n=a.data).filter((function(e){return!1!==e.isAvailable})),t({type:"GET_AVAILABLE_BUSES",payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/driver/inService/all");case 2:a=e.sent,t({type:"GET_DRIVERS_INSERVICE",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/stuff/inService/all");case 2:a=e.sent,t({type:"GET_STUFFS_INSERVICE",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$=a(2),X=a.n($),Z=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.getAllAvailableBuses(),n.props.getBusRoutes(),n.props.getAllDriversInservice(),n.props.getAllStuffsInservice()},n.componentWillReceiveProps=function(e){e.errors&&n.setState({errors:e.errors})},n.getDateForInput=function(e){var t=new Date(e);return String(t.getFullYear()+"-"+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<10?"0":"")+t.getDate())},n.parseTimeString=function(){var e=n.state.time.split(":"),t=new Date(n.state.date);return t.setHours(e[0]),t.setMinutes(e[1]),t},n.showRoute=function(e){for(var t="",a=0,n=e.length;a<n;a++){var r=e[a];t=t.concat(r.stoppageName),a+1<n&&(t=t.concat(", "))}return t},n.onChangeHandler=function(e){n.setState(Object(V.a)({},e.target.name,e.target.value))},n.onChangeSelectorHandler=function(e,t,a){if(-1!==parseInt(e.target.value))n.setState(Object(V.a)({},e.target.name,n.props[t].find((function(t){return t[a]===parseInt(e.target.value)}))));else{var r=Object(V.a)({},a,"-1");n.setState(Object(V.a)({},e.target.name,r))}},n.onSubmitHandler=function(e){e.preventDefault();var t={scheduleId:n.state.scheduleId,date:n.parseTimeString(),isComplete:n.state.isComplete,bus:n.state.bus?n.state.bus:{},route:n.state.route?n.state.route:{},driver:n.state.driver?n.state.driver:{},stuff:n.state.stuff?n.state.stuff:null};n.props.createSchedule(t,n.props.history)},n.state={scheduleId:"",date:"",time:"",isComplete:"",bus:{},route:{},driver:{},stuff:"",errors:{}},n.getDateForInput=n.getDateForInput.bind(Object(g.a)(n)),n.parseTimeString=n.parseTimeString.bind(Object(g.a)(n)),n.showRoute=n.showRoute.bind(Object(g.a)(n)),n.onChangeHandler=n.onChangeHandler.bind(Object(g.a)(n)),n.onChangeSelectorHandler=n.onChangeSelectorHandler.bind(Object(g.a)(n)),n.onSubmitHandler=n.onSubmitHandler.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.errors;return r.a.createElement(b.a,{style:{paddingTop:"10px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,null,r.a.createElement(f.a,{md:3},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Date"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.date}),name:"date",type:"date",value:this.state.date&&this.getDateForInput(this.state.date),onChange:this.onChangeHandler}),t.date&&r.a.createElement("div",{className:"invalid-feedback"},t.date))),r.a.createElement(f.a,{md:2},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Time"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.date}),name:"time",type:"time",value:this.state.time,onChange:this.onChangeHandler}),t.date&&r.a.createElement("div",{className:"invalid-feedback"},t.date))),r.a.createElement(f.a,{md:7},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Route"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.route||t.routeId}),as:"select",name:"route",value:this.state.route?this.state.route.routeId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"routes","routeId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Route"),this.props.routes.map((function(t,a){return r.a.createElement("option",{key:a,value:t.routeId,style:{fontSize:"12px"}},"Route "+t.routeId+": "+e.showRoute(t.routeDetail))}))),(t.route||t.routeId)&&r.a.createElement("div",{className:"invalid-feedback"},t.route||t.routeId)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Bus"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.bus||t.busId}),as:"select",name:"bus",value:this.state.bus?this.state.bus.busId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"availableBuses","busId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Bus"),this.props.availableBuses.map((function(e,t){return r.a.createElement("option",{key:t,value:e.busId,style:{fontSize:"12px"}},"BusId: "+e.busId+", Number: "+e.number)}))),(t.bus||t.busId)&&r.a.createElement("div",{className:"invalid-feedback"},t.bus||t.busId))),r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Driver"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.driver||t.driverId}),as:"select",name:"driver",value:this.state.driver?this.state.driver.driverId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"drivers","driverId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Driver"),this.props.drivers.map((function(e,t){return r.a.createElement("option",{key:t,value:e.driverId,style:{fontSize:"12px"}},"DriverId: "+e.driverId+", Name: "+e.user.firstName+" "+e.user.lastName)}))),(t.driver||t.driverId)&&r.a.createElement("div",{className:"invalid-feedback"},t.driver||t.driverId))),r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Stuff(Optional)"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.stuff||t.stuffId}),as:"select",name:"stuff",value:this.state.stuff?this.state.stuff.stuffId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"stuffs","stuffId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Stuff"),this.props.stuffs.map((function(e,t){return r.a.createElement("option",{key:t,value:e.stuffId,style:{fontSize:"12px"}},"StuffId: "+e.stuffId+", Name: "+e.user.firstName+" "+e.user.lastName)}))),(t.stuff||t.stuffId)&&r.a.createElement("div",{className:"invalid-feedback"},t.stuff||t.stuffId)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:3},r.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement(f.a,{md:6}),r.a.createElement(f.a,{md:3},r.a.createElement(E.a,{variant:"secondary",type:"reset",style:{float:"right"}},"Reset")))))}}]),a}(n.Component),ee=Object(R.b)((function(e){return{errors:e.errors,availableBuses:e.bus.availableBuses,routes:e.busRoute.routes,drivers:e.driver.drivers,stuffs:e.stuff.stuffs}}),{createSchedule:F,getAllAvailableBuses:K,getBusRoutes:G,getAllDriversInservice:Q,getAllStuffsInservice:J})(Z),te=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.scheduleId;e.props.getSchedule(t,e.props.history),e.props.getAllAvailableBuses(),e.props.getBusRoutes(),e.props.getAllDriversInservice(),e.props.getAllStuffsInservice()},e.componentWillReceiveProps=function(t){t.errors&&e.setState({errors:t.errors});var a=t.schedule,n=a.scheduleId,r=a.date,o=a.isComplete,l=a.bus,s=a.route,i=a.driver,c=a.stuff,u=new Date(r);e.setState({scheduleId:n,date:r,time:String((u.getHours()<10?"0":"")+u.getHours()+":"+(u.getMinutes()<10?"0":"")+u.getMinutes()+":"+(u.getSeconds()<10?"0":"")+u.getSeconds()),isComplete:o,bus:l,route:s,driver:i,stuff:c})},e.getDateForInput=function(e){var t=new Date(e);return String(t.getFullYear()+"-"+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<10?"0":"")+t.getDate())},e.parseTimeString=function(){var t=e.state.time.split(":"),a=new Date(e.state.date);return a.setHours(t[0]),a.setMinutes(t[1]),a},e.showRoute=function(e){for(var t="",a=0,n=e.length;a<n;a++){var r=e[a];t=t.concat(r.stoppageName),a+1<n&&(t=t.concat(", "))}return t},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onChangeSelectorHandler=function(t,a,n){if(-1!==parseInt(t.target.value))e.setState(Object(V.a)({},t.target.name,e.props[a].find((function(e){return e[n]===parseInt(t.target.value)}))));else{var r=Object(V.a)({},n,"-1");e.setState(Object(V.a)({},t.target.name,r))}},e.onSubmitHandler=function(t){t.preventDefault();var a={scheduleId:e.state.scheduleId,date:e.parseTimeString(),isComplete:e.state.isComplete,bus:e.state.bus?e.state.bus:{},route:e.state.route?e.state.route:{},driver:e.state.driver?e.state.driver:{},stuff:e.state.stuff?e.state.stuff:null};e.props.createSchedule(a,e.props.history)},e.state={scheduleId:"",date:"",time:"",isComplete:"",bus:{},route:{},driver:{},stuff:{},errors:{}},e.getDateForInput=e.getDateForInput.bind(Object(g.a)(e)),e.parseTimeString=e.parseTimeString.bind(Object(g.a)(e)),e.showRoute=e.showRoute.bind(Object(g.a)(e)),e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onChangeSelectorHandler=e.onChangeSelectorHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.errors;return r.a.createElement(b.a,{style:{paddingTop:"10px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,null,r.a.createElement(f.a,{md:3},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Date"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.date}),name:"date",type:"date",value:this.state.date?this.getDateForInput(this.state.date):"",onChange:this.onChangeHandler}),t.date&&r.a.createElement("div",{className:"invalid-feedback"},t.date))),r.a.createElement(f.a,{md:2},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Time"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.date}),name:"time",type:"time",value:this.state.time?this.state.time:"",onChange:this.onChangeHandler}),t.date&&r.a.createElement("div",{className:"invalid-feedback"},t.date))),r.a.createElement(f.a,{md:7},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Route"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.route||t.routeId}),as:"select",name:"route",value:this.state.route?this.state.route.routeId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"routes","routeId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Route"),this.props.routes.map((function(t,a){return r.a.createElement("option",{key:a,value:t.routeId,style:{fontSize:"12px"}},"Route "+t.routeId+": "+e.showRoute(t.routeDetail))}))),(t.route||t.routeId)&&r.a.createElement("div",{className:"invalid-feedback"},t.route||t.routeId)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Bus"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.bus||t.busId}),as:"select",name:"bus",value:this.state.bus?this.state.bus.busId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"availableBuses","busId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Bus"),this.props.availableBuses.map((function(e,t){return r.a.createElement("option",{key:t,value:e.busId,style:{fontSize:"12px"}},"BusId: "+e.busId+", Number: "+e.number)}))),(t.bus||t.busId)&&r.a.createElement("div",{className:"invalid-feedback"},t.bus||t.busId))),r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Driver"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.driver||t.driverId}),as:"select",name:"driver",value:this.state.driver?this.state.driver.driverId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"drivers","driverId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Driver"),this.props.drivers.map((function(e,t){return r.a.createElement("option",{key:t,value:e.driverId,style:{fontSize:"12px"}},"DriverId: "+e.driverId+", Name: "+e.user.firstName+" "+e.user.lastName)}))),(t.driver||t.driverId)&&r.a.createElement("div",{className:"invalid-feedback"},t.driver||t.driverId))),r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Stuff(Optional)"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":t.stuff||t.stuffId}),as:"select",name:"stuff",value:this.state.stuff?this.state.stuff.stuffId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"stuffs","stuffId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Select Stuff"),this.props.stuffs.map((function(e,t){return r.a.createElement("option",{key:t,value:e.stuffId,style:{fontSize:"12px"}},"StuffId: "+e.stuffId+", Name: "+e.user.firstName+" "+e.user.lastName)}))),(t.stuff||t.stuffId)&&r.a.createElement("div",{className:"invalid-feedback"},t.stuff||t.stuffId)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Is Complete?"),r.a.createElement(W.a.Control,{as:"select",name:"isComplete",value:this.state.isComplete?this.state.isComplete:"",onChange:this.onChangeHandler},r.a.createElement("option",{value:!1},"No"),r.a.createElement("option",{value:!0},"Yes"))))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:3},r.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement(f.a,{md:6}),r.a.createElement(f.a,{md:3},r.a.createElement(E.a,{variant:"secondary",type:"reset",style:{float:"right"}},"Reset")))))}}]),a}(n.Component),ae=Object(R.b)((function(e){return{errors:e.errors,schedule:e.schedule.schedule,availableBuses:e.bus.availableBuses,routes:e.busRoute.routes,drivers:e.driver.drivers,stuffs:e.stuff.stuffs}}),{createSchedule:F,getSchedule:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.get("/api/schedule/GLOBAL/".concat(e));case 3:r=a.sent,n({type:"GET_SCHEDULE",payload:r.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t.push("/schedule");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},getAllAvailableBuses:K,getBusRoutes:G,getAllDriversInservice:Q,getAllStuffsInservice:J})(te),ne=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToPageNo=function(e,t){window.location.replace("/bus/page/".concat(t))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.data.pageNo>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageNo-1,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo-1)}},this.props.data.pageNo-1)),t.push(r.a.createElement(E.a,{key:this.props.data.pageNo,size:"sm",variant:"primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo)}},this.props.data.pageNo));for(var a=function(a){t.push(r.a.createElement(E.a,{key:a,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,a)}},a))},n=this.props.data.pageNo+1;n<=Math.min(this.props.data.pageCount-1,this.props.data.pageNo+5);n++)a(n);return this.props.data.pageCount-this.props.data.pageNo+1>5&&t.push(r.a.createElement(E.a,{key:0,size:"sm",variant:"outline-primary",disabled:!0},r.a.createElement("strong",null,"......"))),this.props.data.pageCount-this.props.data.pageNo+1>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageCount,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageCount)}},this.props.data.pageCount)),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{md:2,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:{pathname:"/bus/add",busId:null,returnLink:window.location.pathname}},r.a.createElement(E.a,{size:"sm",variant:"outline-primary"},"Add Bus"))),r.a.createElement(f.a,{md:2,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:"/bus/requisition"},r.a.createElement(E.a,{size:"sm",variant:"outline-info"},"Requisition"))),r.a.createElement(f.a,{md:8,style:{padding:"5px",paddingRight:"15px"}},r.a.createElement(B.a,{size:"sm",style:{float:"right"}},t)))}}]),a}(n.Component),re=a(5),oe=a.n(re),le=a(117),se=a(116),ie=a(120),ce=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{paddingBottom:"10px"}},r.a.createElement(ie.a,{border:"warning",style:{fontSize:"13px"}},r.a.createElement(ie.a.Header,null,r.a.createElement(m.a,null,r.a.createElement(f.a,{md:9},r.a.createElement(ie.a.Text,null,r.a.createElement("strong",null,"From: "),this.props.busReport.driver.fullName+" (ID: "+this.props.busReport.driver.driverId+")",r.a.createElement("br",null),r.a.createElement("strong",null,"Email: "),this.props.busReport.driver.email)),r.a.createElement(f.a,{md:3},r.a.createElement(ie.a.Text,null,r.a.createElement("strong",null,"Date: "),new Date(this.props.busReport.date).toDateString())))),r.a.createElement(ie.a.Body,null,this.props.busReport.report.split("/").map((function(e,t){return r.a.createElement(ie.a.Text,{key:t},e)}))),r.a.createElement(ie.a.Footer,null,r.a.createElement(m.a,null,r.a.createElement(f.a,{md:9}),r.a.createElement(f.a,{md:2},r.a.createElement(E.a,{size:"sm",variant:"outline-success",onClick:function(){return e.props.markBusReportAsSolved(e.props.busId,e.props.busReport.busReportId)}},"Mark as Solved")),r.a.createElement(f.a,{md:1},r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.props.deleteBusReportHandler(e.props.busId,e.props.busReport.busReportId)}},r.a.createElement(w.a,{icon:T.j})))))))}}]),a}(n.Component),ue=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(le.a,{size:"xl",centered:!0,show:this.props.show,onHide:this.props.onHideHandler},r.a.createElement(le.a.Header,{closeButton:!0},r.a.createElement(le.a.Title,null,this.props.bus.number+" Reports")),r.a.createElement(le.a.Body,null,r.a.createElement(se.a,{style:{height:"500px",overflow:"auto"}},this.props.busReports.sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(t,a){return r.a.createElement(ce,{key:a,busReport:t,busId:e.props.bus.busId,markBusReportAsSolved:e.props.markBusReportAsSolved,deleteBusReportHandler:e.props.deleteBusReportHandler})})))))}}]),a}(n.Component),pe={backgroundColor:"#ebc6c6"},de=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllBuses()},e.deleteBusHandler=function(t){e.props.deleteBus(t,e.props.history)},e.markBusReportAsSolved=function(t,a){e.props.markBusReportAsSolved(t,a,e.props.history)},e.deleteBusReportHandler=function(t,a){e.props.deleteBusReportFromBus(t,a,e.props.history)};var n=1,r=window.location.pathname.split("/");return 4===r.length&&(n=parseInt(r[3])),e.state={pageNo:n,show:!1},e.deleteBusHandler=e.deleteBusHandler.bind(Object(g.a)(e)),e.markBusReportAsSolved=e.markBusReportAsSolved.bind(Object(g.a)(e)),e.deleteBusReportHandler=e.deleteBusReportHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=30*this.state.pageNo,a=30*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props.bus;return r.a.createElement(m.a,null,r.a.createElement(ne,{data:{pageNo:this.state.pageNo,pageCount:parseInt(n.buses.length/30)+(n.buses.length%30>0?1:0)}}),r.a.createElement(f.a,{md:12,style:{paddingTop:"10px"}},r.a.createElement(A.a,{size:"sm",bordered:!0,hover:!0,striped:!0},r.a.createElement("thead",{style:{textAlign:"center",fontSize:"12px"}},r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Number"),r.a.createElement("th",null,"Oil Tank Capacity"),r.a.createElement("th",null,"Gas Cylinder Capacity"),r.a.createElement("th",null,"Is Available"),r.a.createElement("th",{colSpan:2},"Action"))),r.a.createElement("tbody",{style:{textAlign:"center"}},n.buses.map((function(n,o){return o+1>=a&&o+1<=t?r.a.createElement("tr",{key:o,style:!1===n.isAvailable?pe:null},r.a.createElement("td",null,o+1),r.a.createElement("td",null,r.a.createElement(m.a,null,r.a.createElement(f.a,{md:2}),r.a.createElement(f.a,{md:8},n.number),r.a.createElement(f.a,{md:2},n.busReports.length>0&&r.a.createElement("div",null,r.a.createElement(E.a,{size:"sm",variant:"danger",style:{borderRadius:"30px",fontWeight:"800"},onClick:function(){return e.setState({show:!0})}},n.busReports.length),r.a.createElement(ue,{show:e.state.show,bus:{busId:n.busId,number:n.number},busReports:n.busReports.map((function(e){return{busReportId:e.busReportId,date:e.date,report:e.report,driver:{driverId:e.driver.driverId,fullName:e.driver.user.firstName+" "+e.driver.user.firstName,email:e.driver.user.email}}})),onHideHandler:function(){return e.setState({show:!1})},markBusReportAsSolved:e.markBusReportAsSolved,deleteBusReportHandler:e.deleteBusReportHandler}))))),r.a.createElement("td",null,n.oilTankCapacity),r.a.createElement("td",null,n.gasCylinderCapacity),r.a.createElement("td",null,!0===n.isAvailable?"YES":"NO"),r.a.createElement("td",null,r.a.createElement(p.b,{to:"/bus/edit/"+n.busId},r.a.createElement(E.a,{size:"sm",variant:"outline-success"},r.a.createElement(w.a,{icon:T.f})))),r.a.createElement("td",null,r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteBusHandler(n.busId)}},r.a.createElement(w.a,{icon:T.j})))):null}))))))}}]),a}(n.Component);de.protoType={bus:oe.a.object.isRequired,getAllBuses:oe.a.func.isRequired,deleteBus:oe.a.func.isRequired,markBusReportAsSolved:oe.a.func.isRequired,deleteBusReportFromBus:oe.a.func.isRequired};var me=Object(R.b)((function(e){return{bus:e.bus}}),{getAllBuses:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n,r,o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/bus/all");case 2:a=e.sent,n=[],r=0;case 5:if(!(r<a.data.length)){e.next=23;break}return o=a.data[r],e.t0=o.busId,e.t1=o.number,e.t2=o.oilTankCapacity,e.t3=o.gasCylinderCapacity,e.t4=o.isAvailable,e.next=14,N.a.get("/api/bus/GLOBAL/schedule/".concat(o.busId));case 14:return e.t5=e.sent.data,e.next=17,N.a.get("/api/bus/busReport/".concat(o.busId));case 17:e.t6=e.sent.data.filter((function(e){return!1===e.solved})),l={busId:e.t0,number:e.t1,oilTankCapacity:e.t2,gasCylinderCapacity:e.t3,isAvailable:e.t4,schedules:e.t5,busReports:e.t6},n.push(l);case 20:r++,e.next=5;break;case 23:t({type:"GET_BUSES",payload:n});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteBus:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/bus/".concat(e));case 4:n({type:"DELETE_BUS",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/bus");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()},markBusReportAsSolved:function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Are you sure?")){n.next=10;break}return n.prev=1,n.next=4,N.a.get("/api/busReport/markAsSolved/".concat(t));case 4:r({type:"MARK_BUSREPORT_AS_SOLVED",payload:{busId:e,busReportId:t}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),a.push("/bus");case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()},deleteBusReportFromBus:function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Are you sure?")){n.next=10;break}return n.prev=1,n.next=4,N.a.delete("/api/busReport/".concat(t));case 4:r({type:"DELETE_BUSREPORT",payload:{busId:e,busReportId:t}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),a.push("/bus");case 10:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()}})(de),fe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentWillReceiveProps=function(t){t.errors&&e.setState({errors:t.errors})},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={busId:e.state.busId,number:e.state.number,oilTankCapacity:e.state.oilTankCapacity,gasCylinderCapacity:e.state.gasCylinderCapacity,isAvailable:e.state.isAvailable};e.props.addBus(a,"add",e.props.history)},e.state={busId:"",number:"",oilTankCapacity:"",gasCylinderCapacity:"",isAvailable:!1,errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,{style:{padding:"15px"}},r.a.createElement("strong",null,"Add new bus")),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:8},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Bus Number"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.number}),name:"number",type:"text",value:this.state.number,onChange:this.onChangeHandler}),e.number&&r.a.createElement("div",{className:"invalid-feedback"},e.number))),r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Is Available"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.isAvailable}),name:"isAvailable",as:"select",value:this.state.isAvailable,onChange:this.onChangeHandler},r.a.createElement("option",{key:1,value:"false"},"No"),r.a.createElement("option",{key:2,value:"true"},"Yes")),e.isAvailable&&r.a.createElement("div",{className:"invalid-feedback"},e.isAvailable)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Oil Tank capacity (Liters)"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.oilTankCapacity}),name:"oilTankCapacity",type:"number",value:this.state.oilTankCapacity,onChange:this.onChangeHandler}),e.oilTankCapacity&&r.a.createElement("div",{className:"invalid-feedback"},e.oilTankCapacity))),r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Gas Cylinder capacity (Liters)"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.gasCylinderCapacity}),name:"gasCylinderCapacity",type:"number",value:this.state.gasCylinderCapacity,onChange:this.onChangeHandler}),e.gasCylinderCapacity&&r.a.createElement("div",{className:"invalid-feedback"},e.gasCylinderCapacity)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(E.a,{type:"submit",variant:"primary"},"Submit")),r.a.createElement(f.a,{md:6},r.a.createElement(E.a,{type:"reset",variant:"secondary",style:{float:"right"}},"Reset")))))}}]),a}(n.Component),ge=Object(R.b)((function(e){return{errors:e.errors}}),{addBus:Y})(fe),he=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.busId;e.props.getBus(t,e.props.history)},e.componentWillReceiveProps=function(t){t.errors&&e.setState({errors:t.errors});var a=t.bus,n=a.busId,r=a.number,o=a.oilTankCapacity,l=a.gasCylinderCapacity,s=a.isAvailable;e.setState({busId:n,number:r,oilTankCapacity:o,gasCylinderCapacity:l,isAvailable:s})},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={busId:e.state.busId,number:e.state.number,oilTankCapacity:e.state.oilTankCapacity,gasCylinderCapacity:e.state.gasCylinderCapacity,isAvailable:e.state.isAvailable};e.props.addBus(a,"update",e.props.history)},e.state={busId:"",number:"",oilTankCapacity:"",gasCylinderCapacity:"",isAvailable:!1,errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,{style:{padding:"15px"}},r.a.createElement("strong",null,"Edit ")),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:8},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Bus Number"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.number}),name:"number",type:"text",value:this.state.number,onChange:this.onChangeHandler}),e.number&&r.a.createElement("div",{className:"invalid-feedback"},e.number))),r.a.createElement(f.a,{md:4},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Is Available"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.isAvailable}),name:"isAvailable",as:"select",value:this.state.isAvailable,onChange:this.onChangeHandler},r.a.createElement("option",{key:1,value:"false"},"No"),r.a.createElement("option",{key:2,value:"true"},"Yes")),e.isAvailable&&r.a.createElement("div",{className:"invalid-feedback"},e.isAvailable)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Oil Tank capacity (Liters)"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.oilTankCapacity}),name:"oilTankCapacity",type:"number",value:this.state.oilTankCapacity,onChange:this.onChangeHandler}),e.oilTankCapacity&&r.a.createElement("div",{className:"invalid-feedback"},e.oilTankCapacity))),r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Gas Cylinder capacity (Liters)"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.gasCylinderCapacity}),name:"gasCylinderCapacity",type:"number",value:this.state.gasCylinderCapacity,onChange:this.onChangeHandler}),e.gasCylinderCapacity&&r.a.createElement("div",{className:"invalid-feedback"},e.gasCylinderCapacity)))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(E.a,{type:"submit",variant:"primary"},"Submit")),r.a.createElement(f.a,{md:6},r.a.createElement(E.a,{type:"reset",variant:"secondary",style:{float:"right"}},"Reset")))))}}]),a}(n.Component),be=Object(R.b)((function(e){return{errors:e.errors,bus:e.bus.bus}}),{getBus:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.get("/api/bus/GLOBAL/".concat(e));case 3:r=a.sent,n({type:"GET_BUS",payload:r.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t.push("/bus");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},addBus:Y})(he),Ee=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).goToPageNo=function(e,t){window.location.replace("/bus/requisition/page/".concat(t))},e.goToPageNo=e.goToPageNo.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.data.pageNo>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageNo-1,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo-1)}},this.props.data.pageNo-1)),t.push(r.a.createElement(E.a,{key:this.props.data.pageNo,size:"sm",variant:"primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo)}},this.props.data.pageNo));for(var a=function(a){t.push(r.a.createElement(E.a,{key:a,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,a)}},a))},n=this.props.data.pageNo+1;n<=Math.min(this.props.data.pageCount-1,this.props.data.pageNo+5);n++)a(n);return this.props.data.pageCount-this.props.data.pageNo+1>5&&t.push(r.a.createElement(E.a,{key:0,size:"sm",variant:"outline-primary",disabled:!0},r.a.createElement("strong",null,"......"))),this.props.data.pageCount-this.props.data.pageNo+1>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageCount,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageCount)}},this.props.data.pageCount)),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{md:3,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:"/bus/requisition/add"},r.a.createElement(E.a,{size:"sm",variant:"outline-primary"},"Add Rquisition"))),r.a.createElement(f.a,{md:9,style:{padding:"5px",paddingRight:"15px"}},r.a.createElement(B.a,{size:"sm",style:{float:"right"}},t)))}}]),a}(n.Component),ve={backgroundColor:"#ebc6c6"},ye=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllBusRequisitions()},e.deleteBusRequisition=function(t){e.props.deleteBusRequisition(t,e.props.history)};var n=1,r=window.location.pathname.split("/");return 5===r.length&&(n=parseInt(r[4])),e.state={pageNo:n},e.deleteBusRequisition=e.deleteBusRequisition.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=30*this.state.pageNo,a=30*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props.busRequsitions;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(m.a,null,r.a.createElement(Ee,{data:{pageNo:this.state.pageNo,pageCount:parseInt(n.length/30)+(n.length%30>0?1:0)}})),r.a.createElement(b.a,{style:{paddingLeft:"0px",paddingRight:"0px",height:"1290px",overflow:"auto"}},r.a.createElement(A.a,{size:"sm",bordered:!0,hover:!0,striped:!0},r.a.createElement("thead",{style:{textAlign:"center"}},r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Starting Date & Time"),r.a.createElement("th",null,"Finishing Date & Time"),r.a.createElement("th",null,"Bus"),r.a.createElement("th",null,"Driver"),r.a.createElement("th",null,"User"),r.a.createElement("th",{colSpan:2},"Action"))),r.a.createElement("tbody",{style:{textAlign:"center"}},n.map((function(n,o){return o+1>=a&&o+1<=t&&r.a.createElement("tr",{key:o,style:!0===n.isExpired?ve:null},r.a.createElement("td",null,o+1),r.a.createElement("td",null,r.a.createElement(f.a,{style:{padding:"0px",fontSize:"11px"}},r.a.createElement("div",null,new Date(n.startDateTime).toDateString()),r.a.createElement("div",null,new Date(n.startDateTime).toLocaleTimeString()))),r.a.createElement("td",null,r.a.createElement(f.a,{style:{padding:"0px",fontSize:"11px"}},r.a.createElement("div",null,new Date(n.endDateTime).toDateString()),r.a.createElement("div",null,new Date(n.endDateTime).toLocaleTimeString()))),r.a.createElement("td",null,r.a.createElement(f.a,{style:{padding:"0px",fontSize:"11px"}},r.a.createElement("div",null,"ID: "+n.bus.busId),r.a.createElement("div",null,"Number: "+n.bus.number))),r.a.createElement("td",null,r.a.createElement(f.a,{style:{padding:"0px",fontSize:"11px"}},r.a.createElement("div",null,"Name: "+n.driver.user.firstName+" "+n.driver.user.lastName),r.a.createElement("div",null,"Email: "+n.driver.user.email),r.a.createElement("div",null,"Mobile: "+n.driver.user.mobileNo))),r.a.createElement("td",null,r.a.createElement(f.a,{style:{padding:"0px",fontSize:"11px"}},r.a.createElement("div",null,"Name: "+n.user.firstName+" "+n.user.lastName),r.a.createElement("div",null,"Email: "+n.user.email),r.a.createElement("div",null,"Mobile: "+n.user.mobileNo))),r.a.createElement("td",null,r.a.createElement(p.b,{to:"/bus/requisition/edit/".concat(n.requisitionId)},r.a.createElement(E.a,{size:"sm",variant:"outline-success"},r.a.createElement(w.a,{icon:T.f})))),r.a.createElement("td",null,r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteBusRequisition(n.requisitionId)}},r.a.createElement(w.a,{icon:T.j}))))}))))))}}]),a}(n.Component),Se=Object(R.b)((function(e){return{busRequsitions:e.bus.busRequsitions}}),{getAllBusRequisitions:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/requisition/all");case 2:a=e.sent,(n=a.data).sort((function(e,t){return new Date(t.endDateTime)-new Date(e.endDateTime)})),t({type:"GET_BUS_REQUISITIONS",payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteBusRequisition:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are  you sure")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/requisition/".concat(e));case 4:n({type:"DELETE_BUS_REQUISITION",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/bus/requisition");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})(ye),Ce=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){if(e.props.getAllUsers(),e.props.getAllAvailableBuses(),e.props.getAllDriversInservice(),"edit"===e.state.type){var t=e.props.match.params.requisitionId;e.props.getBusRequisition(t,e.props.history)}},e.componentWillReceiveProps=function(t){if(t.errors&&e.setState({errors:t.errors}),"edit"===e.state.type&&t.busRequsition){var a=t.busRequsition,n=a.requisitionId,r=a.startDateTime,o=a.endDateTime,l=a.isExpired,s=a.user,i=a.bus,c=a.driver;e.setState({requisitionId:n,startDateTime:e.parseDateToString(r),endDateTime:e.parseDateToString(o),isExpired:l||!1,user:s,bus:i,driver:c})}},e.parseDateToString=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()<10?"0":"")+t.getMonth()+"-"+(t.getDate()<10?"0":"")+t.getDate()+"T"+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onChangeSelectorHandler=function(t,a,n){if(-1!==parseInt(t.target.value))e.setState(Object(V.a)({},t.target.name,e.props[a].find((function(e){return e[n]===parseInt(t.target.value)}))));else{var r=Object(V.a)({},n,"-1");e.setState(Object(V.a)({},t.target.name,r))}},e.onSubmitHandler=function(t){t.preventDefault();var a=new Date(e.state.startDateTime),n=a;n.setHours(a.getHours()),n.setMinutes(a.getMinutes());var r=a=new Date(e.state.endDateTime);r.setHours(a.getHours()),r.setMinutes(a.getMinutes());var o={requisitionId:e.state.requisitionId,startDateTime:n,endDateTime:r,isExpired:e.state.isExpired,user:e.state.user?e.state.user:{},bus:e.state.bus?e.state.bus:{},driver:e.state.driver?e.state.driver:{}};e.props.createBusRequisitions(o,e.props.history)};var n=window.location.pathname.split("/");return e.state={requisitionId:"",startDateTime:"",endDateTime:"",isExpired:!1,bus:{},driver:{},user:{},type:n[3],errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onChangeSelectorHandler=e.onChangeSelectorHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e.parseDateToString=e.parseDateToString.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.users,n=t.buses,o=t.drivers,l=t.errors;return r.a.createElement(b.a,{style:{padding:"10px"}},r.a.createElement(se.a,null,r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,null,r.a.createElement(W.a.Group,{className:"col-md-4"},r.a.createElement(W.a.Label,null,"Stating Date & Time"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":l.startDateTime}),name:"startDateTime",type:"datetime-local",value:this.state.startDateTime,onChange:this.onChangeHandler}),l.startDateTime&&r.a.createElement("div",{className:"invalid-feedback"},l.startDateTime)),r.a.createElement(W.a.Group,{className:"col-md-4"},r.a.createElement(W.a.Label,null,"Finishing Date & Time"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":l.endDateTime}),name:"endDateTime",type:"datetime-local",value:this.state.endDateTime,onChange:this.onChangeHandler}),l.endDateTime&&r.a.createElement("div",{className:"invalid-feedback"},l.endDateTime))),r.a.createElement(m.a,null,r.a.createElement(W.a.Group,{className:"col-md-6"},r.a.createElement(W.a.Label,null,"Requested User"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":l.user}),as:"select",name:"user",value:this.state.user?this.state.user.userId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"users","userId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Selete User email"),a.map((function(e,t){return r.a.createElement("option",{key:t,value:e.userId},e.email)}))),l.user&&r.a.createElement("div",{className:"invalid-feedback"},l.user))),r.a.createElement(m.a,null,r.a.createElement(W.a.Group,{className:"col-md-6"},r.a.createElement(W.a.Label,null,"Bus"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":l.bus}),as:"select",name:"bus",value:this.state.bus?this.state.bus.busId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"buses","busId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Selete Bus"),n.map((function(e,t){return r.a.createElement("option",{key:t,value:e.busId},e.number)}))),l.bus&&r.a.createElement("div",{className:"invalid-feedback"},l.bus)),r.a.createElement(W.a.Group,{className:"col-md-6"},r.a.createElement(W.a.Label,null,"Driver"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":l.driver}),as:"select",name:"driver",value:this.state.driver?this.state.driver.driverId:"",onChange:function(t){return e.onChangeSelectorHandler(t,"drivers","driverId")},style:{fontSize:"12px"}},r.a.createElement("option",{value:{},style:{fontSize:"12px"}},"Selete Driver"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e.driverId},e.user.email)}))),l.driver&&r.a.createElement("div",{className:"invalid-feedback"},l.driver))),"edit"===this.state.type&&r.a.createElement(m.a,null,r.a.createElement(W.a.Group,{className:"col-md-4"},r.a.createElement(W.a.Label,null,"Is Expired"),r.a.createElement(W.a.Control,{as:"select",name:"isExpired",value:this.state.isExpired,onChange:this.onChangeHandler},r.a.createElement("option",{value:"false"},"No"),r.a.createElement("option",{value:"true"},"Yes")))),r.a.createElement(m.a,null,r.a.createElement("br",null)),r.a.createElement(m.a,null,r.a.createElement(W.a.Group,{className:"col-md-2"},r.a.createElement(E.a,{type:"submit",variant:"primary"},"Submit"))))))}}]),a}(n.Component),Ne=Object(R.b)((function(e){return{users:e.user.users,buses:e.bus.availableBuses,drivers:e.driver.drivers,busRequsition:e.bus.busRequsition,errors:e.errors}}),{getAllUsers:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/user/all");case 2:a=e.sent,t({type:"GET_USERS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getAllAvailableBuses:K,getAllDriversInservice:Q,createBusRequisitions:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.post("/api/requisition/add",e);case 3:t.push("/bus/requisition"),n({type:k,payload:{}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:k,payload:a.t0.response.data});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},getBusRequisition:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.get("/api/requisition/".concat(e));case 3:r=a.sent,n({type:"GET_BUS_REQUISITION",payload:r.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t.push("/bus/requisition");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Ce),ke=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToPageNo=function(e,t){window.location.replace("/route/page/".concat(t))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.data.pageNo>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageNo-1,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo-1)}},this.props.data.pageNo-1)),t.push(r.a.createElement(E.a,{key:this.props.data.pageNo,size:"sm",variant:"primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo)}},this.props.data.pageNo));for(var a=function(a){t.push(r.a.createElement(E.a,{key:a,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,a)}},a))},n=this.props.data.pageNo+1;n<=Math.min(this.props.data.pageCount-1,this.props.data.pageNo+5);n++)a(n);return this.props.data.pageCount-this.props.data.pageNo+1>5&&t.push(r.a.createElement(E.a,{key:0,size:"sm",variant:"outline-primary",disabled:!0},r.a.createElement("strong",null,"......"))),this.props.data.pageCount-this.props.data.pageNo+1>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageCount,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageCount)}},this.props.data.pageCount)),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{md:3,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:{pathname:"/route/add",routeId:null,returnLink:window.location.pathname}},r.a.createElement(E.a,{size:"sm",variant:"outline-primary"},"Add Route"))),r.a.createElement(f.a,{md:9,style:{padding:"5px",paddingRight:"15px"}},r.a.createElement(B.a,{size:"sm",style:{float:"right"}},t)))}}]),a}(n.Component),Oe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getBusRoutes()},e.showRoute=function(e){for(var t="",a=0,n=e.length;a<n;a++){var r=e[a];t=t.concat(r.stoppageName),a+1<n&&(t=t.concat(", "))}return t},e.deleteRouteHandler=function(t){e.props.deleteBusRoute(t,e.props.history)};var n=1,r=window.location.pathname.split("/");return 4===r.length&&(n=parseInt(r[3])),e.state={pageNo:n},e.showRoute=e.showRoute.bind(Object(g.a)(e)),e.deleteRouteHandler=e.deleteRouteHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=20*this.state.pageNo,a=20*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props.busRoute;return r.a.createElement(m.a,null,r.a.createElement(ke,{data:{pageNo:this.state.pageNo,pageCount:parseInt(n.routes.length/20)+(n.routes.length%20>0?1:0)}}),r.a.createElement(f.a,{md:12,style:{paddingTop:"10px"}},r.a.createElement(A.a,{size:"sm",bordered:!0,hover:!0,striped:!0,style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Route No"),r.a.createElement("th",null,"Route"),r.a.createElement("th",{colSpan:2},"Action"))),r.a.createElement("tbody",null,n.routes.map((function(n,o){return o+1>=a&&o+1<=t?r.a.createElement("tr",{key:o},r.a.createElement("td",null,o+1),r.a.createElement("td",null,n.routeId),r.a.createElement("td",{style:{textAlign:"left"}},e.showRoute(n.routeDetail)),r.a.createElement("td",null,r.a.createElement(p.b,{to:"/route/edit/"+n.routeId},r.a.createElement(E.a,{size:"sm",variant:"outline-success"},r.a.createElement(w.a,{icon:T.f})))),r.a.createElement("td",null,r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteRouteHandler(n.routeId)}},r.a.createElement(w.a,{icon:T.j})))):null}))))))}}]),a}(n.Component),xe=Object(R.b)((function(e){return{busRoute:e.busRoute}}),{getBusRoutes:G,deleteBusRoute:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/route/".concat(e));case 4:n({type:"DELETE_BUSROUTE",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/route");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Oe),je=function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.a.post("/api/stoppage/".concat(t),e);case 3:a.push("/stoppage"),r({type:k,payload:{}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:k,payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},Ie=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/stoppage/GLOBAL/getAll");case 2:a=e.sent,t({type:"GET_STOPPAGES",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Re=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.getAllStoppages()},n.onChangeHandler=function(e){n.setState({seletedStoppage:e.target.value})},n.addStoppageInRoute=function(e,t){e.preventDefault();var a=n.state.stoppageSequence;t.forEach((function(e){e.stoppageId===parseInt(n.state.seletedStoppage)&&a.push(e)})),n.setState({stoppageSequence:a})},n.deleteStoppageFromRoute=function(e,t){e.preventDefault();for(var a=[],r=n.state.stoppageSequence.length,o=0;o<r;o++)o!==t&&a.push(n.state.stoppageSequence[o]);n.setState({stoppageSequence:a})},n.submitFormHandler=function(e){e.preventDefault();for(var t="",a=n.state.stoppageSequence.length,r=0;r<a;r++)t+=n.state.stoppageSequence[r].stoppageId,r!==a-1&&(t+=",");var o={routeId:n.state.routeId,route:t};n.props.addBusRoute(o,n.props.history)},n.state={routeId:"",route:"",routeDetail:[],stoppageSequence:[],seletedStoppage:-1,errors:{}},n.onChangeHandler=n.onChangeHandler.bind(Object(g.a)(n)),n.addStoppageInRoute=n.addStoppageInRoute.bind(Object(g.a)(n)),n.deleteStoppageFromRoute=n.deleteStoppageFromRoute.bind(Object(g.a)(n)),n.submitFormHandler=n.submitFormHandler.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.stoppage;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(W.a,{onSubmit:this.submitFormHandler},r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement("strong",null,"Add New Route")),r.a.createElement(m.a,{style:{padding:"5px"}},this.state.stoppageSequence.map((function(t,a){return r.a.createElement(B.a,{size:"sm",key:a,style:{padding:"5px"}},r.a.createElement(E.a,{size:"sm",variant:"outline-dark",disabled:!0},r.a.createElement("strong",null,t.stoppageName)),r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(t){return e.deleteStoppageFromRoute(t,a)}},r.a.createElement(w.a,{icon:T.k})))}))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:7}),r.a.createElement(f.a,{md:3},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{as:"select",custom:!0,style:{fontSize:"12px"},onChange:this.onChangeHandler},r.a.createElement("option",{style:{fontSize:"12px"},value:-1},"Select Stoppage"),t.stoppages.map((function(e,t){return r.a.createElement("option",{key:t+1,value:e.stoppageId,style:{fontSize:"12px"}},e.stoppageName)}))))),r.a.createElement(f.a,{md:2},r.a.createElement(E.a,{size:"sm",variant:"outline-success",onClick:function(a){return e.addStoppageInRoute(a,t.stoppages)}},"Add Stoppage"))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(E.a,{type:"submit",size:"sm",variant:"primary"},"Submit"))))}}]),a}(n.Component),we=Object(R.b)((function(e){return{errors:e.errors,stoppage:e.stoppage}}),{addBusRoute:L,getAllStoppages:Ie})(Re),Te=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.routeId;n.props.getBusRoute(e,n.props.history),n.props.getAllStoppages()},n.componentWillReceiveProps=function(e){e.errors&&n.setState({errors:e.errors});var t=e.busRoute,a=t.routeId,r=t.route,o=t.routeDetail;n.setState({routeId:a,route:r,routeDetail:o,stoppageSequence:o})},n.onChangeHandler=function(e){n.setState({seletedStoppage:e.target.value})},n.addStoppageInRoute=function(e,t){e.preventDefault();var a=n.state.stoppageSequence;t.forEach((function(e){e.stoppageId===parseInt(n.state.seletedStoppage)&&a.push(e)})),n.setState({stoppageSequence:a})},n.deleteStoppageFromRoute=function(e,t){e.preventDefault();for(var a=[],r=n.state.stoppageSequence.length,o=0;o<r;o++)o!==t&&a.push(n.state.stoppageSequence[o]);n.setState({stoppageSequence:a})},n.submitFormHandler=function(e){e.preventDefault();for(var t="",a=n.state.stoppageSequence.length,r=0;r<a;r++)t+=n.state.stoppageSequence[r].stoppageId,r!==a-1&&(t+=",");var o={routeId:n.state.routeId,route:t};n.props.addBusRoute(o,n.props.history)},n.state={routeId:"",route:"",routeDetail:[],stoppageSequence:[],seletedStoppage:-1,errors:{}},n.onChangeHandler=n.onChangeHandler.bind(Object(g.a)(n)),n.addStoppageInRoute=n.addStoppageInRoute.bind(Object(g.a)(n)),n.deleteStoppageFromRoute=n.deleteStoppageFromRoute.bind(Object(g.a)(n)),n.submitFormHandler=n.submitFormHandler.bind(Object(g.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.stoppage;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(W.a,{onSubmit:this.submitFormHandler},r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement("strong",null,"Edit Route")),r.a.createElement(m.a,{style:{padding:"5px"}},this.state.stoppageSequence&&this.state.stoppageSequence.map((function(t,a){return r.a.createElement(B.a,{size:"sm",key:a,style:{padding:"5px"}},r.a.createElement(E.a,{size:"sm",variant:"outline-dark",disabled:!0},r.a.createElement("strong",null,t.stoppageName)),r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(t){return e.deleteStoppageFromRoute(t,a)}},r.a.createElement(w.a,{icon:T.k})))}))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:7}),r.a.createElement(f.a,{md:3},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{as:"select",custom:!0,style:{fontSize:"12px"},onChange:this.onChangeHandler},r.a.createElement("option",{style:{fontSize:"12px"},value:-1},"Select Stoppage"),t.stoppages.map((function(e,t){return r.a.createElement("option",{key:t+1,value:e.stoppageId,style:{fontSize:"12px"}},e.stoppageName)}))))),r.a.createElement(f.a,{md:2},r.a.createElement(E.a,{size:"sm",variant:"outline-success",onClick:function(a){return e.addStoppageInRoute(a,t.stoppages)}},"Add Stoppage"))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(E.a,{type:"submit",size:"sm",variant:"primary"},"Submit"))))}}]),a}(n.Component),He=Object(R.b)((function(e){return{errors:e.errors,stoppage:e.stoppage,busRoute:e.busRoute.route}}),{addBusRoute:L,getBusRoute:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.get("/api/route/GLOBAL/".concat(e));case 3:r=a.sent,n({type:"GET_BUSROUTE",payload:r.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t.push("/route");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},getAllStoppages:Ie})(Te),De=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToPageNo=function(e,t){window.location.replace("/stoppage/page/".concat(t))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.data.pageNo>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageNo-1,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo-1)}},this.props.data.pageNo-1)),t.push(r.a.createElement(E.a,{key:this.props.data.pageNo,size:"sm",variant:"primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo)}},this.props.data.pageNo));for(var a=function(a){t.push(r.a.createElement(E.a,{key:a,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,a)}},a))},n=this.props.data.pageNo+1;n<=Math.min(this.props.data.pageCount-1,this.props.data.pageNo+5);n++)a(n);return this.props.data.pageCount-this.props.data.pageNo+1>5&&t.push(r.a.createElement(E.a,{key:0,size:"sm",variant:"outline-primary",disabled:!0},r.a.createElement("strong",null,"......"))),this.props.data.pageCount-this.props.data.pageNo+1>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageCount,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageCount)}},this.props.data.pageCount)),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{md:3,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:"/stoppage/add"},r.a.createElement(E.a,{size:"sm",variant:"outline-primary"},"Add Stoppage"))),r.a.createElement(f.a,{md:9,style:{padding:"5px",paddingRight:"15px"}},r.a.createElement(B.a,{size:"sm",style:{float:"right"}},t)))}}]),a}(n.Component),Ae=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllStoppages()},e.deletestoppageById=function(t){e.props.deleteStoppage(t,e.props.history)};var n=1,r=window.location.pathname.split("/");return 4===r.length&&(n=parseInt(r[3])),e.state={pageNo:n},e.deletestoppageById=e.deletestoppageById.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=30*this.state.pageNo,a=30*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props.stoppage;return r.a.createElement(m.a,null,r.a.createElement(De,{data:{pageNo:this.state.pageNo,pageCount:parseInt(n.stoppages.length/30)+(n.stoppages.length%30>0?1:0)}}),r.a.createElement(f.a,{md:12,style:{paddingTop:"10px"}},r.a.createElement(A.a,{size:"sm",bordered:!0,hover:!0,striped:!0,style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Latitude"),r.a.createElement("th",null,"Longitude"),r.a.createElement("th",{colSpan:2},"Action"))),r.a.createElement("tbody",null,n.stoppages.map((function(n,o){return o+1>=a&&o+1<=t?r.a.createElement("tr",{key:o},r.a.createElement("td",null,o+1),r.a.createElement("td",null,n.stoppageName),r.a.createElement("td",null,n.latitude),r.a.createElement("td",null,n.longitude),r.a.createElement("td",null,r.a.createElement(p.b,{to:"/stoppage/edit/".concat(n.stoppageId)},r.a.createElement(E.a,{size:"sm",variant:"outline-success"},r.a.createElement(w.a,{icon:T.f})))),r.a.createElement("td",null,r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deletestoppageById(n.stoppageId)}},r.a.createElement(w.a,{icon:T.j})))):null}))))))}}]),a}(n.Component),Be=Object(R.b)((function(e){return{stoppage:e.stoppage}}),{getAllStoppages:Ie,deleteStoppage:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/stoppage/delete/".concat(e));case 4:n({type:"DELETE_STOPPAGE",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/schedule");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Ae),ze=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentWillReceiveProps=function(t){t.errors&&e.setState({errors:t.errors})},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={stoppageId:e.state.stoppageId,stoppageName:e.state.stoppageName,latitude:e.state.latitude,longitude:e.state.longitude};e.props.addStoppage(a,"add",e.props.history)},e.state={stoppageId:"",stoppageName:"",latitude:"",longitude:"",errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:12},r.a.createElement("strong",null,"Add New Stoppage"))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:12},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Stoppage Name"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":e.stoppageName}),name:"stoppageName",type:"text",value:this.state.stoppageName,onChange:this.onChangeHandler}),e.stoppageName&&r.a.createElement("div",{className:"invalid-feedback"},e.stoppageName)))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Latitude"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":e.latitude}),name:"latitude",type:"text",value:this.state.latitude,onChange:this.onChangeHandler}),e.latitude&&r.a.createElement("div",{className:"invalid-feedback"},e.latitude))),r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Longitude"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":e.longitude}),name:"longitude",type:"text",value:this.state.longitude,onChange:this.onChangeHandler}),e.longitude&&r.a.createElement("div",{className:"invalid-feedback"},e.longitude)))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:12},r.a.createElement(E.a,{size:"sm",type:"submit",variant:"primary"},"Submit")))))}}]),a}(n.Component),Le=Object(R.b)((function(e){return{errors:e.errors}}),{addStoppage:je})(ze),Ge=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.stoppageId;e.props.getStoppageById(t,e.props.history)},e.componentWillReceiveProps=function(t){t.errors&&e.setState({errors:t.errors});var a=t.stoppage,n=a.stoppageId,r=a.stoppageName,o=a.latitude,l=a.longitude;e.setState({stoppageId:n,stoppageName:r,latitude:o,longitude:l})},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={stoppageId:e.state.stoppageId,stoppageName:e.state.stoppageName,latitude:e.state.latitude,longitude:e.state.longitude};e.props.addStoppage(a,"update",e.props.history)},e.state={stoppageId:"",stoppageName:"",latitude:"",longitude:"",errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(b.a,{style:{padding:"5px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:12},r.a.createElement("strong",null,"Edit Stoppage"))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:12},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Stoppage Name"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":e.stoppageName}),name:"stoppageName",type:"text",value:this.state.stoppageName,onChange:this.onChangeHandler}),e.stoppageName&&r.a.createElement("div",{className:"invalid-feedback"},e.stoppageName)))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Latitude"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":e.latitude}),name:"latitude",type:"text",value:this.state.latitude,onChange:this.onChangeHandler}),e.latitude&&r.a.createElement("div",{className:"invalid-feedback"},e.latitude))),r.a.createElement(f.a,{md:6},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Label,null,"Longitude"),r.a.createElement("input",{className:X()("form-control from-control-lg",{"is-invalid":e.longitude}),name:"longitude",type:"text",value:this.state.longitude,onChange:this.onChangeHandler}),e.longitude&&r.a.createElement("div",{className:"invalid-feedback"},e.longitude)))),r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:12},r.a.createElement(E.a,{size:"sm",type:"submit",variant:"primary"},"Submit")))))}}]),a}(n.Component),Fe=Object(R.b)((function(e){return{errors:e.errors,stoppage:e.stoppage.stoppage}}),{getStoppageById:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.get("/api/stoppage/GLOBAL/get/".concat(e));case 3:r=a.sent,n({type:"GET_STOPPAGE",payload:r.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t.push("/stoppage");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},addStoppage:je})(Ge),qe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).goToPageNo=function(t,a){window.location.replace("/".concat(e.props.data.type,"/page/").concat(a))},e.goToPageNo=e.goToPageNo.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=[];this.props.data.pageNo>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageNo-1,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo-1)}},this.props.data.pageNo-1)),t.push(r.a.createElement(E.a,{key:this.props.data.pageNo,size:"sm",variant:"primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageNo)}},this.props.data.pageNo));for(var a=function(a){t.push(r.a.createElement(E.a,{key:a,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,a)}},a))},n=this.props.data.pageNo+1;n<=Math.min(this.props.data.pageCount-1,this.props.data.pageNo+5);n++)a(n);return this.props.data.pageCount-this.props.data.pageNo+1>5&&t.push(r.a.createElement(E.a,{key:0,size:"sm",variant:"outline-primary",disabled:!0},r.a.createElement("strong",null,"......"))),this.props.data.pageCount-this.props.data.pageNo+1>1&&t.push(r.a.createElement(E.a,{key:this.props.data.pageCount,size:"sm",variant:"outline-primary",onClick:function(t){return e.goToPageNo(t,e.props.data.pageCount)}},this.props.data.pageCount)),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{md:3,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement(p.b,{to:"/".concat(this.props.data.type,"/add")},r.a.createElement(E.a,{size:"sm",variant:"outline-primary"},"Add "+this.props.data.type))),r.a.createElement(f.a,{md:9,style:{padding:"5px",paddingRight:"15px"}},r.a.createElement(B.a,{size:"sm",style:{float:"right"}},t)))}}]),a}(n.Component),_e=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllDriversInservice()},e.deleteDriver=function(t){e.props.deleteDriver(t,e.props.history)};var n=1,r=window.location.pathname.split("/");return 4===r.length&&(n=parseInt(r[3])),e.state={pageNo:n,type:r[1]},e.deleteDriver=e.deleteDriver.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=30*this.state.pageNo,a=30*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props.driver;return r.a.createElement(m.a,null,r.a.createElement(qe,{data:{type:this.state.type,pageNo:this.state.pageNo,pageCount:parseInt(n.drivers.length/30)+(n.drivers.length%30>0?1:0)}}),r.a.createElement(f.a,{md:12},r.a.createElement(A.a,{size:"sm",bordered:!0,hover:!0,striped:!0,style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Full Name"),r.a.createElement("th",null,"Mobile No"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,n.drivers.map((function(n,o){return o+1>=a&&o+1<=t&&r.a.createElement("tr",{key:o},r.a.createElement("td",null,o+1),r.a.createElement("td",null,n.user.firstName+" "+n.user.lastName),r.a.createElement("td",null,n.user.mobileNo),r.a.createElement("td",null,n.user.email),r.a.createElement("td",null,n.rating),r.a.createElement("td",null,r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteDriver(n.driverId)}},r.a.createElement(w.a,{icon:T.j}))))}))))))}}]),a}(n.Component),Ue=Object(R.b)((function(e){return{driver:e.driver}}),{getAllDriversInservice:Q,deleteDriver:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/driver/remove/".concat(e));case 4:n({type:"DELETE_DRIVER",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/driver");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})(_e),Pe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllStuffsInservice()},e.deleteStuff=function(t){e.props.deleteStuff(t,e.props.history)};var n=1,r=window.location.pathname.split("/");return 4===r.length&&(n=parseInt(r[3])),e.state={pageNo:n,type:r[1]},e.deleteStuff=e.deleteStuff.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=30*this.state.pageNo,a=30*(this.state.pageNo-1)+(this.state.pageNo>1?1:0),n=this.props.stuff;return r.a.createElement(m.a,null,r.a.createElement(qe,{data:{type:this.state.type,pageNo:this.state.pageNo,pageCount:parseInt(n.stuffs.length/30)+(n.stuffs.length%30>0?1:0)}}),r.a.createElement(f.a,{md:12},r.a.createElement(A.a,{size:"sm",bordered:!0,hover:!0,striped:!0,style:{textAlign:"center"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"SL"),r.a.createElement("th",null,"Full Name"),r.a.createElement("th",null,"Mobile No"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Rating"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,n.stuffs.map((function(n,o){return o+1>=a&&o+1<=t&&r.a.createElement("tr",{key:o},r.a.createElement("td",null,o+1),r.a.createElement("td",null,n.user.firstName+" "+n.user.lastName),r.a.createElement("td",null,n.user.mobileNo),r.a.createElement("td",null,n.user.email),r.a.createElement("td",null,n.rating),r.a.createElement("td",null,r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.deleteStuff(n.stuffId)}},r.a.createElement(w.a,{icon:T.j}))))}))))))}}]),a}(n.Component),Me=Object(R.b)((function(e){return{stuff:e.stuff}}),{getAllStuffsInservice:J,deleteStuff:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/stuff/remove/".concat(e));case 4:n({type:"DELETE_STUFF",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/stuff");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Pe),Ve=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password,firstName:e.state.firstName,lastName:e.state.lastName,mobileNo:e.state.mobileNo,isBlocked:!1};e.props.addNewDriverOrStuff(a,e.state.type,e.props.history)};var n=window.location.pathname.split("/");return e.state={email:"",password:"",firstName:"",lastName:"",mobileNo:"",type:n[1]},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.errors;return r.a.createElement(b.a,{style:{padding:"25px"}},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler,style:{padding:"20px"}},r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.firstName}),name:"firstName",type:"text",value:this.state.firstName,onChange:this.onChangeHandler,placeholder:"First Name"}),e.firstName&&r.a.createElement("div",{className:"invalid-feedback"},e.firstName)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.lastName}),name:"lastName",type:"text",value:this.state.lastName,onChange:this.onChangeHandler,placeholder:"Last Name"}),e.lastName&&r.a.createElement("div",{className:"invalid-feedback"},e.lastName)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.email}),name:"email",type:"email",value:this.state.email,onChange:this.onChangeHandler,placeholder:"@Email"}),e.email&&r.a.createElement("div",{className:"invalid-feedback"},e.email)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.password}),name:"password",type:"password",value:this.state.password,onChange:this.onChangeHandler,placeholder:"Initial Password"}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement(W.a.Group,null,r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.mobileNo}),name:"mobileNo",type:"text",value:this.state.mobileNo,onChange:this.onChangeHandler,placeholder:"Mobile no"}),e.mobileNo&&r.a.createElement("div",{className:"invalid-feedback"},e.mobileNo)),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6},r.a.createElement(E.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement(f.a,{md:6},r.a.createElement(E.a,{variant:"secondary",type:"reset",style:{float:"right"}},"Reset")))))}}]),a}(n.Component),We=Object(R.b)((function(e){return{errors:e.errors}}),{addNewDriverOrStuff:function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.a.post("/api/user/register/".concat(t),e);case 3:r({type:k,payload:{}}),a.push("/".concat(t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:k,payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})(Ve),Ye=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{style:{paddingBottom:"10px"}},r.a.createElement(ie.a,null,r.a.createElement(ie.a.Header,null,r.a.createElement(ie.a.Title,null,"Date: "+new Date(this.props.data.date).toLocaleDateString())),r.a.createElement(ie.a.Body,null,this.props.data.announcement.split("\n").map((function(e,t){return r.a.createElement(ie.a.Text,{key:t},e)}))),r.a.createElement(ie.a.Footer,null,r.a.createElement("div",{className:"col-md-1",style:{float:"right"}},r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.props.delete(e.props.data.announcementId)}},r.a.createElement(w.a,{icon:T.j}))))))}}]),a}(n.Component),Ke=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAll()},e.delete=function(t){e.props.deleteAnnouncement(t,e.props.history)},e.delete=e.delete.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.announcement;return r.a.createElement(b.a,{style:{padding:"10px"}},r.a.createElement("div",{className:"col-md-2",style:{padding:"10px"}},r.a.createElement(p.b,{to:"/notice/add"},r.a.createElement(E.a,{size:"sm",variant:"primary"},"Add Notice"))),r.a.createElement(se.a,{style:{height:"1250px",overflow:"auto"}},t.announcements.map((function(t,a){return r.a.createElement(Ye,{key:a,data:t,delete:e.delete})}))))}}]),a}(n.Component);Ke.propType={getAll:oe.a.func.isRequired,deleteAnnouncement:oe.a.func.isRequired};var Qe=Object(R.b)((function(e){return{announcement:e.announcement}}),{getAll:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/announcement/GLOBAL/all");case 2:a=e.sent,(n=a.data).sort((function(e,t){return new Date(t.date)-new Date(e.date)})),t({type:"GET_ANNOUNCEMENTS",payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteAnnouncement:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/announcement/".concat(e));case 4:n({type:"DELETE_ANNOUNCEMENT",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/notice");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Ke),Je=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentWillReceiveProps=function(t){t.errors&&e.setState({errors:t.errors})},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={date:e.state.date,announcement:e.state.announcement};e.props.create(a,e.props.history)},e.state={date:"",announcement:"",errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.errors;return r.a.createElement(b.a,{style:{padding:"10px"}},r.a.createElement(se.a,null,r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(W.a.Group,{className:"col-md-4"},r.a.createElement(W.a.Label,null,"Date"),r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.date}),name:"date",type:"date",value:this.state.date,onChange:this.onChangeHandler}),e.date&&r.a.createElement("div",{className:"invalid-feedback"},e.date)),r.a.createElement(W.a.Group,{className:"col-md-12"},r.a.createElement(W.a.Label,null,"Announcement"),r.a.createElement("textarea",{className:X()("form-control from-control-lg",{"is-invalid":e.announcement}),name:"announcement",type:"textArea",value:this.state.announcement,onChange:this.onChangeHandler,style:{height:"200px",fontSize:"12px"}}),e.announcement&&r.a.createElement("div",{className:"invalid-feedback"},e.announcement)),r.a.createElement(W.a.Group,{className:"col-md-2"},r.a.createElement(E.a,{size:"sm",variant:"primary",type:"submit"},"Submit")))))}}]),a}(n.Component);Je.propType={create:oe.a.func.isRequired,errors:oe.a.object.isRequired};var $e=Object(R.b)((function(e){return{errors:e.errors}}),{create:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,N.a.post("/api/announcement/add",e);case 3:n({type:k,payload:{}}),t.push("/notice"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:k,payload:a.t0.response.data});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Je),Xe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault(),e.props.sendFeedbackReply(e.state.notification,e.props.user),e.props.onHideHandler(t)},e.state={notification:""},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(le.a,{size:"lg",centered:!0,show:this.props.show,onHide:this.props.onHideHandler},r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(le.a.Header,{closeButton:!0},r.a.createElement(le.a.Title,null,"Reply Feedback")),r.a.createElement(le.a.Body,null,r.a.createElement(m.a,{style:{padding:"5px"}},r.a.createElement(f.a,{md:9},r.a.createElement(W.a.Text,null,r.a.createElement("strong",null,"To: "),this.props.user.email)),r.a.createElement(f.a,{md:3},r.a.createElement(W.a.Text,null,r.a.createElement("strong",null,"Date: "),new Date(this.props.date).toDateString()))),r.a.createElement(W.a.Group,null,r.a.createElement("textarea",{className:"form-control from-control-lg",name:"notification",style:{height:"150px",fontSize:"12px"},value:this.state.notification,onChange:this.onChangeHandler,required:!0}))),r.a.createElement(le.a.Footer,null,r.a.createElement(E.a,{size:"sm",variant:"primary",type:"submit"},"Send"),r.a.createElement(E.a,{size:"sm",variant:"danger",onClick:this.props.onHideHandler},"Close"))))}}]),a}(n.Component),Ze=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).openFeedbackReplyForm=function(t){e.setState({show:!0})},e.onHideHandler=function(t){e.setState({show:!1})},e.state={show:!1},e.openFeedbackReplyForm=e.openFeedbackReplyForm.bind(Object(g.a)(e)),e.onHideHandler=e.onHideHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{style:{paddingBottom:"10px"}},r.a.createElement(ie.a,{border:"warning"},r.a.createElement(ie.a.Header,null,r.a.createElement(m.a,null,r.a.createElement(f.a,{md:9},r.a.createElement(ie.a.Subtitle,{style:{marginBottom:"5px"}},"User Name: "+this.props.data.user.firstName+" "+this.props.data.user.lastName),r.a.createElement(ie.a.Text,null,"User Email: "+this.props.data.user.email)),r.a.createElement(f.a,{md:3},r.a.createElement(ie.a.Subtitle,null,"Date: "+new Date(this.props.data.date).toDateString())))),r.a.createElement(ie.a.Body,null,this.props.data.description.split("\n").map((function(e,t){return r.a.createElement(ie.a.Text,{key:t},e)}))),r.a.createElement(ie.a.Footer,null,r.a.createElement("div",{className:"col-md-1",style:{float:"right"}},r.a.createElement(E.a,{size:"sm",variant:"outline-danger",onClick:function(){return e.props.deleteFeedback(e.props.data.feedbackId)}},r.a.createElement(w.a,{icon:T.j}))),r.a.createElement("div",{className:"col-md-1",style:{float:"right"}},r.a.createElement(E.a,{size:"sm",variant:"outline-info",onClick:this.openFeedbackReplyForm},r.a.createElement(w.a,{icon:T.h})),r.a.createElement(Xe,{show:this.state.show,user:this.props.data.user,date:this.props.data.date,onHideHandler:this.onHideHandler,sendFeedbackReply:this.props.sendFeedbackReply})))))}}]),a}(n.Component),et=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.getAllFeedbacks()},e.deleteFeedback=function(t){e.props.deleteFeedback(t,e.props.history)},e.sendFeedbackReply=function(t,a){var n={date:(new Date).toISOString(),notification:t,user:a};e.props.replyFeedback(n)},e.deleteFeedback=e.deleteFeedback.bind(Object(g.a)(e)),e.sendFeedbackReply=e.sendFeedbackReply.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.feedback;return r.a.createElement(b.a,{style:{padding:"10px"}},r.a.createElement(se.a,{style:{height:"1250px",overflow:"auto"}},t.feedbacks.map((function(t,a){return r.a.createElement(Ze,{key:a,data:t,deleteFeedback:e.deleteFeedback,sendFeedbackReply:e.sendFeedbackReply})}))))}}]),a}(n.Component);et.propType={feedback:oe.a.func.isRequired,getAllFeedbacks:oe.a.func.isRequired,deleteFeedback:oe.a.func.isRequired,replyFeedback:oe.a.func.isRequired};var tt=Object(R.b)((function(e){return{feedback:e.feedback}}),{getAllFeedbacks:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/api/feedback/all");case 2:a=e.sent.data,t({type:"GET_FEEDBACKS",payload:a.sort((function(e,t){return new Date(t.date)-new Date(e.date)}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},deleteFeedback:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure?")){a.next=10;break}return a.prev=1,a.next=4,N.a.delete("/api/feedback/".concat(e));case 4:n({type:"DELETE_FEEDBACK",payload:e}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),t.push("/feedback");case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()},replyFeedback:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post("/api/notification/add",e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),a({type:k,payload:t.t0.response.data});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}})(et),at=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props.security.isValidToken&&e.props.history.push("/schedule")},e.componentWillReceiveProps=function(e){e.security.isValidToken&&(window.location.href="/schedule")},e.onChangeHandler=function(t){e.setState(Object(V.a)({},t.target.name,t.target.value))},e.onSubmitHandler=function(t){t.preventDefault();var a={username:e.state.username,password:e.state.password};e.props.login(a)},e.state={username:"",password:"",errors:{}},e.onChangeHandler=e.onChangeHandler.bind(Object(g.a)(e)),e.onSubmitHandler=e.onSubmitHandler.bind(Object(g.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.errors;return r.a.createElement(m.a,{style:{padding:"10px",paddingTop:"100px"}},r.a.createElement(f.a,{md:3}),r.a.createElement(f.a,{md:6},r.a.createElement(se.a,null,r.a.createElement(b.a,{style:{padding:"10px",paddingLeft:"220px"}},r.a.createElement("img",{src:"/diuIcon.png",height:"120px",alt:"login logo"})),r.a.createElement(W.a,{onSubmit:this.onSubmitHandler},r.a.createElement(W.a.Group,{as:m.a},r.a.createElement(W.a.Label,{column:!0,sm:2},"Email"),r.a.createElement(f.a,{sm:10},r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.username}),name:"username",type:"email",placeholder:"Email",value:this.state.username,onChange:this.onChangeHandler}),e.username&&r.a.createElement("div",{className:"invalid-feedback"},e.username))),r.a.createElement(W.a.Group,{as:m.a},r.a.createElement(W.a.Label,{column:!0,sm:2},"Password"),r.a.createElement(f.a,{sm:10},r.a.createElement(W.a.Control,{className:X()("form-control from-control-lg",{"is-invalid":e.password}),name:"password",type:"password",placeholder:"Password",value:this.state.password,onChange:this.onChangeHandler}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password))),r.a.createElement(m.a,null,r.a.createElement(f.a,{md:5}),r.a.createElement(W.a.Group,{className:"col-md-7"},r.a.createElement(E.a,{size:"sm",variant:"primary",type:"submit"},"Login")))))))}}]),a}(n.Component),nt=Object(R.b)((function(e){return{errors:e.errors,security:e.security}}),{login:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.post("/api/admin/login",e);case 3:n=t.sent,r=n.data.jwt,localStorage.setItem("jwtToken",r),O(r),o=j()(r),a({type:"SET_CURRENT_USER",payload:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:k,payload:t.t0.response.data});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}})(at),rt=a(30),ot=a(70),lt=a(71),st={},it=a(17),ct={stoppages:[],stoppage:{}},ut={buses:[],availableBuses:[],bus:{},busRequsitions:[],busRequsition:{}},pt={schedules:[],schedule:{}},dt={routes:[],route:{}},mt={drivers:[],driver:{}},ft={stuffs:[],stuff:{}},gt={announcements:[]},ht={feedbacks:[]},bt={users:[]},Et={user:{},isValidToken:!1},vt=Object(rt.combineReducers)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},stoppage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_STOPPAGES":return Object(it.a)({},e,{stoppages:t.payload});case"GET_STOPPAGE":return Object(it.a)({},e,{stoppage:t.payload});case"DELETE_STOPPAGE":return Object(it.a)({},e,{stoppages:e.stoppages.filter((function(e){return e.stoppageId!==t.payload}))});default:return e}},bus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BUSES":return Object(it.a)({},e,{buses:t.payload});case"GET_BUS":return Object(it.a)({},e,{bus:t.payload});case"DELETE_BUS":return Object(it.a)({},e,{buses:e.buses.filter((function(e){return e.busId!==t.payload}))});case"GET_AVAILABLE_BUSES":return Object(it.a)({},e,{availableBuses:t.payload});case"MARK_BUSREPORT_AS_SOLVED":case"DELETE_BUSREPORT":return Object(it.a)({},e,{buses:e.buses.map((function(e){return e.busId===t.payload.busId&&(e.busReports=e.busReports.filter((function(e){return e.busReportId!==t.payload.busReportId}))),e}))});case"GET_BUS_REQUISITIONS":return Object(it.a)({},e,{busRequsitions:t.payload});case"GET_BUS_REQUISITION":return Object(it.a)({},e,{busRequsition:t.payload});case"DELETE_BUS_REQUISITION":return Object(it.a)({},e,{busRequsitions:e.busRequsitions.filter((function(e){return e.requisitionId!==t.payload}))});default:return e}},busRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BUSROUTES":return Object(it.a)({},e,{routes:t.payload});case"GET_BUSROUTE":return Object(it.a)({},e,{route:t.payload});case"DELETE_BUSROUTE":return Object(it.a)({},e,{routes:e.routes.filter((function(e){return e.routeId!==t.payload}))});default:return e}},schedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SCHEDULES":return Object(it.a)({},e,{schedules:t.payload});case"GET_SCHEDULE":return Object(it.a)({},e,{schedule:t.payload});case"DELETE_SCHEDULE":return Object(it.a)({},e,{schedules:e.schedules.filter((function(e){return e.scheduleId!==t.payload}))});default:return e}},driver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DRIVERS_INSERVICE":return Object(it.a)({},e,{drivers:t.payload});case"DELETE_DRIVER":return Object(it.a)({},e,{drivers:e.drivers.filter((function(e){return e.driverId!==t.payload}))});default:return e}},stuff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_STUFFS_INSERVICE":return Object(it.a)({},e,{stuffs:t.payload});case"DELETE_STUFF":return Object(it.a)({},e,{stuffs:e.stuffs.filter((function(e){return e.stuffId!==t.payload}))});default:return e}},announcement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ANNOUNCEMENTS":return Object(it.a)({},e,{announcements:t.payload});case"DELETE_ANNOUNCEMENT":return Object(it.a)({},e,{announcements:e.announcements.filter((function(e){return e.announcementId!==t.payload}))});default:return e}},feedback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_FEEDBACKS":return Object(it.a)({},e,{feedbacks:t.payload});case"DELETE_FEEDBACK":return Object(it.a)({},e,{feedbacks:e.feedbacks.filter((function(e){return e.feedbackId!==t.payload}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(it.a)({},e,{users:t.payload});default:return e}},security:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(it.a)({},e,{isValidToken:!!t.payload,user:t.payload});default:return e}}}),yt=[lt.a],St=Object(rt.createStore)(vt,{},Object(ot.composeWithDevTools)(rt.applyMiddleware.apply(void 0,yt))),Ct=a(72),Nt=Object(R.b)((function(e){return{security:e.security}}))((function(e){var t=e.component,a=e.security,n=Object(Ct.a)(e,["component","security"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a.isValidToken?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/login"})}}))})),kt=localStorage.jwtToken;if(kt){O(kt);var Ot=j()(kt);St.dispatch({type:"SET_CURRENT_USER",payload:Ot});var xt=Date.now()/1e3;Ot.exp<xt&&(St.dispatch(I()),window.location.href="/")}var jt={border:"1px solid gray",borderRadius:"5px",height:"1350px"},It=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(R.a,{store:St},r.a.createElement(p.a,null,r.a.createElement("div",{className:"App",style:{paddingTop:"10px",paddingLeft:"20px",paddingRight:"20px",paddingBottom:"10px"}},kt&&r.a.createElement(m.a,null,r.a.createElement(f.a,{md:6,style:{padding:"5px",paddingLeft:"15px"}},r.a.createElement("img",{src:"/diubnr.jpg",height:"40px",alt:"banar"}))),r.a.createElement(m.a,null,kt&&r.a.createElement(f.a,{md:2},r.a.createElement(D,null)),r.a.createElement(f.a,{md:kt?10:12,style:kt?jt:null},r.a.createElement("div",{role:"main"},r.a.createElement(d.b,{exact:!0,path:"/",component:nt}),r.a.createElement(d.b,{exact:!0,path:"/login",component:nt}),r.a.createElement(d.d,null,r.a.createElement(Nt,{exact:!0,path:"/schedule",component:M}),r.a.createElement(Nt,{exact:!0,path:"/schedule/add",component:ee}),r.a.createElement(Nt,{exact:!0,path:"/schedule/page/:pageNo",component:M}),r.a.createElement(Nt,{exact:!0,path:"/schedule/edit/:scheduleId",component:ae}),r.a.createElement(Nt,{exact:!0,path:"/bus",component:me}),r.a.createElement(Nt,{exact:!0,path:"/bus/page/:pageNo",component:me}),r.a.createElement(Nt,{exact:!0,path:"/bus/add",component:ge}),r.a.createElement(Nt,{exact:!0,path:"/bus/edit/:busId",component:be}),r.a.createElement(Nt,{exact:!0,path:"/bus/requisition",component:Se}),r.a.createElement(Nt,{exact:!0,path:"/bus/requisition/page/:pageNo",component:Se}),r.a.createElement(Nt,{exact:!0,path:"/bus/requisition/add",component:Ne}),r.a.createElement(Nt,{exact:!0,path:"/bus/requisition/edit/:requisitionId",component:Ne}),r.a.createElement(Nt,{exact:!0,path:"/route",component:xe}),r.a.createElement(Nt,{exact:!0,path:"/route/page/:pageNo",component:xe}),r.a.createElement(Nt,{exact:!0,path:"/route/add",component:we}),r.a.createElement(Nt,{exact:!0,path:"/route/edit/:routeId",component:He}),r.a.createElement(Nt,{exact:!0,path:"/stoppage",component:Be}),r.a.createElement(Nt,{exact:!0,path:"/stoppage/page/:pageNo",component:Be}),r.a.createElement(Nt,{exact:!0,path:"/stoppage/add",component:Le}),r.a.createElement(Nt,{exact:!0,path:"/stoppage/edit/:stoppageId",component:Fe}),r.a.createElement(Nt,{exact:!0,path:"/driver",component:Ue}),r.a.createElement(Nt,{exact:!0,path:"/driver/page/:pageNo",component:Ue}),r.a.createElement(Nt,{exact:!0,path:"/stuff",component:Me}),r.a.createElement(Nt,{exact:!0,path:"/stuff/page/:pageNo",component:Me}),r.a.createElement(Nt,{exact:!0,path:"/driver/add",component:We}),r.a.createElement(Nt,{exact:!0,path:"/stuff/add",component:We}),r.a.createElement(Nt,{exact:!0,path:"/feedback",component:tt}),r.a.createElement(Nt,{exact:!0,path:"/notice",component:Qe}),r.a.createElement(Nt,{exact:!0,path:"/notice/add",component:$e}))))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(It,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,a){e.exports=a(109)},79:function(e,t,a){},80:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.febebfaf.chunk.js.map